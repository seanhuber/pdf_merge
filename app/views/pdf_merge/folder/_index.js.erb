$('html').addClass('pdf-merge-page');

$('.left-pane').resizable({
  handles: { e: '.left-pane > .ui-resizable-handle' },
  create: function( event, ui ) {
    $('.ui-resizable-e').css('cursor','ew-resize');
  }
});

$('#f_tree').folderTree({
  root: '.',
  contents_url: '<%= folder_show_path %>',
  file_click: function(event, data) {
    $.get('<%= fyle_show_path %>', $.param({path: data.path}));
  },
  folder_shown: function(event, data) {
    $("li.folder[data-path='"+data.path+"'] > ul > li.file:first > .basename").trigger('click');
  }
});

$('nav.navbar > .bundle-details').sectionSelector({
  setSectionSelection: function(event, data){
    $('nav.navbar > .bundle-details').bundleContainer('insertPages', data);
  }
});

$('nav.navbar > .bundle-details').bundleContainer();

$('nav.navbar a.build-pdf').click(function(){
  var pages = $('nav.navbar > .bundle-details').bundleContainer('getPages');
  $("form.build-pdf input[name='sections']").val(JSON.stringify(pages));
  $('form.build-pdf').submit();
  return false;
});

// TODO: remove
$('nav.navbar > .bundle-details').bundleContainer('insertPages', {
  fyle_id: 30, // olympus.pdf
  section_id: 1,
  section_name: 'olympus',
  pages: [2,3]
});
// TODO: remove
$('nav.navbar > .bundle-details').bundleContainer('insertPages', {
  fyle_id: 31, // weird_shapes.pdf
  section_id: 2,
  section_name: 'shapes',
  pages: [1,19,33]
});
